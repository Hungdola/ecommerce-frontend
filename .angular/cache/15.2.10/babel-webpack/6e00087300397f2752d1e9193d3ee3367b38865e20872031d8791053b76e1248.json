{"ast":null,"code":"import { filters, singleFilter } from './FilterData';\nimport { select } from '@ngrx/store';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./../../../../State/Product/product.service\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/menu\";\nimport * as i8 from \"@angular/material/divider\";\nimport * as i9 from \"@angular/material/checkbox\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/material/radio\";\nimport * as i12 from \"../../../shared/components/product-card/product-card.component\";\nfunction ProductsComponent_div_25_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4)(2, \"mat-checkbox\", 21);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_25_div_6_Template_mat_checkbox_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const option_r7 = restoredCtx.$implicit;\n      const item_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.handleMultipleSelectFilter(option_r7.value, item_r4.id));\n    });\n    i0.ɵɵelementStart(3, \"span\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const option_r7 = ctx.$implicit;\n    const item_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"name\", item_r4.id)(\"value\", option_r7.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", option_r7.label, \" \");\n  }\n}\nfunction ProductsComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 17)(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 19)(5, \"div\", 20);\n    i0.ɵɵtemplate(6, ProductsComponent_div_25_div_6_Template, 5, 3, \"div\", 14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(7, \"mat-divider\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r4.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", item_r4.options);\n  }\n}\nfunction ProductsComponent_div_26_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 4)(2, \"mat-radio-button\", 21);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_26_div_6_Template_mat_radio_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const option_r16 = restoredCtx.$implicit;\n      const item_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.handleSingleSelectFilter(option_r16.value, item_r12.id));\n    });\n    i0.ɵɵelementStart(3, \"span\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const option_r16 = ctx.$implicit;\n    const item_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"name\", item_r12.id)(\"value\", option_r16.value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", option_r16.label, \" \");\n  }\n}\nfunction ProductsComponent_div_26_mat_divider_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-divider\");\n  }\n}\nfunction ProductsComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 17)(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 19)(5, \"div\", 20);\n    i0.ɵɵtemplate(6, ProductsComponent_div_26_div_6_Template, 5, 3, \"div\", 14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, ProductsComponent_div_26_mat_divider_7_Template, 1, 0, \"mat-divider\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    const last_r13 = ctx.last;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r12.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", item_r12.options);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !last_r13);\n  }\n}\nfunction ProductsComponent_ng_container_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-product-card\", 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", item_r21);\n  }\n}\nexport class ProductsComponent {\n  constructor(router, activatedRoute, productService, store) {\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.productService = productService;\n    this.store = store;\n  }\n  ngOnInit() {\n    this.filterData = filters;\n    this.singleFilterData = singleFilter;\n    // this.menPants = mensPantsPage1: cái này dùng khi chưa có backend\n    this.activatedRoute.paramMap.subscribe(params => {\n      this.levelThree = params.get(\"levelThree\");\n      console.log(\"params\", params);\n      var reqData = {\n        category: this.levelThree,\n        colors: [],\n        sizes: [],\n        minPrice: 0,\n        maxPrice: 10000,\n        minDiscount: 0,\n        pageNumber: 0,\n        pageSize: 10,\n        stock: null\n      };\n      this.productService.findProductByCategory(reqData);\n    });\n    this.activatedRoute.queryParams.subscribe(params => {\n      const color = params[\"color\"];\n      const size = params[\"size\"];\n      const price = params[\"price\"];\n      const discount = params[\"discount\"];\n      const stock = params[\"stock\"];\n      const sort = params[\"sort\"];\n      const pageNumber = params[\"pageNumber\"];\n      const minPrice = price.split(\"-\")[0];\n      const maxPrice = price.split(\"-\")[1];\n      var reqData = {\n        category: this.levelThree,\n        colors: color ? [color].join(\",\") : [],\n        sizes: size,\n        minPrice: minPrice ? minPrice : 0,\n        maxPrice: maxPrice ? maxPrice : 100000,\n        minDiscount: discount ? discount : 0,\n        pageNumber: pageNumber ? pageNumber : 0,\n        pageSize: 10,\n        stock: null\n      };\n      this.productService.findProductByCategory(reqData);\n    });\n    this.store.pipe(select(store => store.product)).subscribe(product => {\n      this.products = product.products.content;\n      console.log(\"store data \", product.products.content);\n    });\n  }\n  handleMultipleSelectFilter(value, sectionId) {\n    const queryParams = {\n      ...this.activatedRoute.snapshot.queryParams\n    };\n    console.log(\"query params: \", queryParams);\n    const filterValues = queryParams[sectionId] ? queryParams[sectionId].split(',') : [];\n    console.log(\"filtervalue: \", filterValues);\n    const valueIndex = filterValues.indexOf(value); //này là để tìm vị trí của value có tồn tại trong mảng hay không, nếu không có thì nó sẽ trả về là -1, value là giá trị trong mảng\n    console.log(\"value:\", value);\n    console.log(\"index:\", valueIndex);\n    if (valueIndex != -1) {\n      filterValues.splice(valueIndex, 1);\n    } else {\n      filterValues.push(value);\n    }\n    if (filterValues.length > 0) {\n      queryParams[sectionId] = filterValues.join(',');\n    } else {\n      delete queryParams[sectionId];\n    }\n    this.router.navigate([], {\n      queryParams\n    });\n  }\n  handleSingleSelectFilter(value, sectionId) {\n    const queryParams = {\n      ...this.activatedRoute.snapshot.queryParams\n    };\n    queryParams[sectionId] = value;\n    this.router.navigate([], {\n      queryParams\n    });\n    // console.log(queryParams)\n  }\n  static #_ = this.ɵfac = function ProductsComponent_Factory(t) {\n    return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.Store));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductsComponent,\n    selectors: [[\"app-products\"]],\n    decls: 30,\n    vars: 4,\n    consts: [[1, \"flex\", \"flex-col\", \"items-center\"], [1, \"px-4\", \"sm:px-6\", \"max-w-7xl\", \"pb-10\"], [1, \"flex\", \"items-baseline\", \"justify-between\", \"border-gray-200\", \"pb-6\", \"pt-24\"], [1, \"text-4xl\", \"font-bold\", \"text-white\"], [1, \"flex\", \"items-center\"], [1, \"\"], [\"mat-button\", \"\", 3, \"matMenuTriggerFor\"], [\"sortMenu\", \"matMenu\"], [\"mat-menu-item\", \"\"], [1, \"pt-6\"], [1, \"grid\", \"grid-cols-1\", \"gap-8\", \"gap-y-10\", \"lg:grid-cols-4\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-lg\"], [1, \"hidden\", \"lg:block\"], [4, \"ngFor\", \"ngForOf\"], [1, \"lg:col-span-3\"], [1, \"flex\", \"flex-wrap\", \"justify-evenly\"], [1, \"py-6\"], [1, \"font-medium\"], [\"id\", \"filter-section-0\", 1, \"pt-6\"], [1, \"scroll-py-4\"], [\"id\", \"'filter - '+ option.value\", 3, \"name\", \"value\", \"click\"], [1, \"text-sm\", \"text-gray-500\"], [4, \"ngIf\"], [3, \"product\"]],\n    template: function ProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"main\", 1)(2, \"div\", 2)(3, \"h1\", 3);\n        i0.ɵɵtext(4, \"Products\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"button\", 6);\n        i0.ɵɵtext(8, \"Sort\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-menu\", null, 7)(11, \"button\", 8);\n        i0.ɵɵtext(12, \"Price: hight-low\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 8);\n        i0.ɵɵtext(14, \"Price: low-hight\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelement(15, \"mat-divider\");\n        i0.ɵɵelementStart(16, \"section\", 9)(17, \"div\", 10)(18, \"div\")(19, \"div\", 11)(20, \"p\", 12);\n        i0.ɵɵtext(21, \"Filters\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-icon\");\n        i0.ɵɵtext(23, \"filter_list\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"form\", 13);\n        i0.ɵɵtemplate(25, ProductsComponent_div_25_Template, 8, 2, \"div\", 14);\n        i0.ɵɵtemplate(26, ProductsComponent_div_26_Template, 8, 3, \"div\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 15)(28, \"div\", 16);\n        i0.ɵɵtemplate(29, ProductsComponent_ng_container_29_Template, 2, 1, \"ng-container\", 14);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(10);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"matMenuTriggerFor\", _r0);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filterData);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.singleFilterData);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.MatIcon, i6.MatButton, i7.MatMenu, i7.MatMenuItem, i7.MatMenuTrigger, i8.MatDivider, i9.MatCheckbox, i10.ɵNgNoValidate, i10.NgControlStatusGroup, i10.NgForm, i11.MatRadioButton, i12.ProductCardComponent],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9kdWN0cy5jb21wb25lbnQuc2NzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvTW9kdWxlL2ZlYXR1cmUvY29tcG9uZW50cy9wcm9kdWN0cy9wcm9kdWN0cy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0Esb0tBQW9LIiwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["filters","singleFilter","select","i0","ProductsComponent","constructor","router","activatedRoute","productService","store","ngOnInit","filterData","singleFilterData","paramMap","subscribe","params","levelThree","get","console","log","reqData","category","colors","sizes","minPrice","maxPrice","minDiscount","pageNumber","pageSize","stock","findProductByCategory","queryParams","color","size","price","discount","sort","split","join","pipe","product","products","content","handleMultipleSelectFilter","value","sectionId","snapshot","filterValues","valueIndex","indexOf","splice","push","length","navigate","handleSingleSelectFilter","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\project-angular-sale-website\\ecommerce-angular\\src\\app\\Module\\feature\\components\\products\\products.component.ts","D:\\project-angular-sale-website\\ecommerce-angular\\src\\app\\Module\\feature\\components\\products\\products.component.html"],"sourcesContent":["import { ProductService } from './../../../../State/Product/product.service';\nimport { Component, OnInit } from '@angular/core';\nimport { filters, singleFilter } from './FilterData';\nimport { mensPantsPage1 } from 'src/Data/pants/men_page1';\nimport { ActivatedRoute, Route, Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport { AppState } from 'src/app/Models/AppState';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.scss']\n})\nexport class ProductsComponent implements OnInit {\n  \n  filterData: any\n  singleFilterData: any\n  products: any\n  levelThree: any\n\n  constructor(private router: Router, private activatedRoute: ActivatedRoute, private productService:ProductService, private store: Store<AppState>) {\n    \n  }\n  \n  ngOnInit(): void {\n    this.filterData = filters\n    this.singleFilterData = singleFilter\n    // this.menPants = mensPantsPage1: cái này dùng khi chưa có backend\n\n    this.activatedRoute.paramMap.subscribe(\n      (params) => {\n        this.levelThree = params.get(\"levelThree\")\n        console.log(\"params\", params)\n        var reqData = {\n          category: this.levelThree,\n          colors: [],\n          sizes: [],\n          minPrice: 0,\n          maxPrice: 10000,\n          minDiscount: 0,\n          pageNumber: 0,\n          pageSize: 10,\n          stock: null\n        }\n        this.productService.findProductByCategory(reqData)\n      }\n    )\n\n    this.activatedRoute.queryParams.subscribe(\n      (params) => {\n        const color = params[\"color\"]\n        const size = params[\"size\"]\n        const price = params[\"price\"]\n        const discount = params[\"discount\"]\n        const stock = params[\"stock\"]\n        const sort = params[\"sort\"]\n        const pageNumber = params[\"pageNumber\"]\n        const minPrice = price.split(\"-\")[0]\n        const maxPrice = price.split(\"-\")[1]\n\n        var reqData = {\n          category: this.levelThree,\n          colors: color?[color].join(\",\"):[],\n          sizes: size,\n          minPrice: minPrice?minPrice:0,\n          maxPrice: maxPrice?maxPrice:100000,\n          minDiscount: discount?discount:0,\n          pageNumber: pageNumber?pageNumber:0,\n          pageSize: 10,\n          stock: null\n\n      }\n      this.productService.findProductByCategory(reqData)\n    }\n    )\n\n    this.store.pipe(select((store) => store.product)).subscribe((product) => {\n      this.products = product.products.content\n      console.log(\"store data \",product.products.content )\n    })\n  }\n\n  handleMultipleSelectFilter(value: string, sectionId:string) {\n    const queryParams = {...this.activatedRoute.snapshot.queryParams}\n\n    console.log(\"query params: \", queryParams)\n\n    const filterValues = queryParams[sectionId]?queryParams[sectionId].split(','):[]\n\n    console.log(\"filtervalue: \",filterValues)\n\n    const valueIndex = filterValues.indexOf(value) //này là để tìm vị trí của value có tồn tại trong mảng hay không, nếu không có thì nó sẽ trả về là -1, value là giá trị trong mảng\n \n    console.log(\"value:\", value)\n    console.log(\"index:\", valueIndex)\n    if(valueIndex !=-1) {\n      filterValues.splice(valueIndex, 1)\n    }\n\n    else {\n      filterValues.push(value)\n    }\n\n    if(filterValues.length > 0) {\n      queryParams[sectionId] = filterValues.join(',')\n    }\n    else {\n      delete queryParams[sectionId]\n    }\n\n    this.router.navigate([], {queryParams})\n  }\n\n  handleSingleSelectFilter(value: string, sectionId: string) {\n    const queryParams = {...this.activatedRoute.snapshot.queryParams}\n\n    queryParams[sectionId] = value\n\n    this.router.navigate([], {queryParams})\n    // console.log(queryParams)\n  }\n\n}\n","<div class=\"flex flex-col items-center\">\n    <main class=\"px-4 sm:px-6 max-w-7xl pb-10\">\n        <div class=\"flex items-baseline justify-between border-gray-200 pb-6 pt-24\">\n\n            <h1 class=\"text-4xl font-bold text-white\">Products</h1>\n\n            <div class=\"flex items-center\">\n                <div class=\"\">\n                    <button mat-button [matMenuTriggerFor]=\"sortMenu\">Sort</button> <!-- cái này là vào trong angular material coppy mẫu menu này -->\n                    <mat-menu #sortMenu=\"matMenu\">\n                        <button mat-menu-item>Price: hight-low</button>\n                        <button mat-menu-item>Price: low-hight</button>\n                    </mat-menu>\n                </div>\n            </div>\n        </div>\n\n        <mat-divider></mat-divider> <!--cái này là dải phân cách -->\n\n        <section class=\"pt-6 \">\n            <div class=\"grid grid-cols-1 gap-8 gap-y-10 lg:grid-cols-4\">\n                <div>\n                    <div class=\"flex items-center justify-between\">\n                        <p class=\"text-lg\">Filters</p>\n                        <mat-icon>filter_list</mat-icon>\n                    </div>\n\n                    <form class=\"hidden lg:block\">\n\n                        <div *ngFor=\"let item of filterData let last = last\">\n\n                            <div class=\"py-6\">\n                                <span class=\"font-medium \">{{item.name}}</span>\n\n                                <div class=\"pt-6\" id=\"filter-section-0\">\n                                    <div class=\"scroll-py-4\">\n                                        <div *ngFor=\"let option of item.options\">\n                                            <div class=\"flex items-center\">\n                                                <mat-checkbox \n                                                    id=\"'filter - '+ option.value\"\n                                                    [name]=\"item.id\"\n                                                    [value]=\"option.value\"\n                                                    (click)=\"handleMultipleSelectFilter(option.value, item.id)\"\n                                                >\n                                                    <span class=\"text-sm text-gray-500\">\n                                                        {{option.label}}\n                                                    </span>\n                                                </mat-checkbox>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                            \n                            <mat-divider></mat-divider>\n\n                        </div>\n\n                        <div *ngFor=\"let item of singleFilterData let last = last\">\n\n                            <div class=\"py-6\">\n                                <span class=\"font-medium \">{{item.name}}</span>\n\n                                <div class=\"pt-6\" id=\"filter-section-0\">\n                                    <div class=\"scroll-py-4\">\n                                        <div *ngFor=\"let option of item.options\">\n                                            <div class=\"flex items-center\">\n                                                <mat-radio-button \n                                                    id=\"'filter - '+ option.value\"\n                                                    [name]=\"item.id\"\n                                                    [value]=\"option.value\"\n                                                    (click)=\"handleSingleSelectFilter(option.value, item.id)\"\n                                                >\n                                                    <span class=\"text-sm text-gray-500\">\n                                                        {{option.label}}\n                                                    </span>\n                                                </mat-radio-button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                            \n                            <mat-divider *ngIf=\"!last\"></mat-divider> <!-- cái này như kiểu 1 trick khi muốn bỏ item cuối cùng không muốn nó có boder  -->\n\n                        </div>\n                    </form>\n                </div>\n\n\n                <div class=\"lg:col-span-3\">\n                    <div class=\"flex flex-wrap justify-evenly\">\n                        <ng-container *ngFor=\"let item of products\">\n\n                            <app-product-card [product]=\"item\"/>\n                            \n                        </ng-container>\n                    </div>\n                </div>\n            </div>\n        </section>\n    </main>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}